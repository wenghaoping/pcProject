<template>
  <div id="login">
    <div class="title tc">微天使，FA的智能工作站</div>
    <div class="loginBox flex">
      <div class="loginBox-left">
        <div class="flex">
          <div class="tab" @click="toggle(index)" v-for="(tab,index) in tabs">
            <router-link :to="tab.jump " class="tabIndex" :class="{border:active===index}" tag="div">
              {{tab.type}}
            </router-link>
          </div>
        </div>
        <router-view></router-view>
      </div>
      <div class="loginBox-right">
        <div class="wx-title tc">
          <img src="../../assets/images/saoma.png"/>
        </div>
        <!--<img class="qrCode" src="">-->
        <!--<iframe class="qrCode" src="https://www.weitianshi.cn/auth/oauth" scrolling="no"></iframe>-->
        <div id="qrCode"></div>
      </div>
    </div>
  </div>
</template>


<script type="text/ecmascript-6">
  export default {
    data () {
      return {
        tabs: [{
          type: "验证码登录", jump: "/login"
        }, {
          type: "密码登录", jump: "/login/codeLogin"
        }]
        ,
        active: 0
      }
    },
    methods: {
      toggle(i){
        this.active = i
      },
      creatObj(){
        var time=Date.now();
        var obj = new WxLogin({
          id: "qrCode",
          appid: "wx9de571b0aa850c03",
          scope: "snsapi_login",
          redirect_uri: "https://www.weitianshi.cn/auth/weixin/callback",
          href: 'https://www.weitianshi.cn/static/css/qrCode.css',
          state:time
        });
      },
      checkReload(){
        let reload = this.$route.query.reload || false;
//        if(reload){window.location.reload();}
      }
    },
    mounted(){
      this.creatObj();
      zhuge.track('购买商品');
    },
    created(){
      this.checkReload();
    },
  }
</script>

<style scoped lang="less">
  @import "../../assets/css/login.less";
</style>
